{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/pradnya/projects/FacialEmotionDetection/FacialEmotionDetection/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/pradnya/projects/FacialEmotionDetection/FacialEmotionDetection/src/App.js\";\n\nfunction _templateObject8() {\n  const data = _taggedTemplateLiteral([\"\\n    position: relative;\\n    width: 90px;\\n    height: 90px;\\n    border-radius: 50%;\\n    background-color: red;\\n    bottom: 8%;\\n    z-index: 10;\\n  \"]);\n\n  _templateObject8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    display: flex;\\n    justify-content: center;\\n    width: 100%;\\n    bottom: 20px;\\n  \"]);\n\n  _templateObject7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  const data = _taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 100%;\\n    background-image: url(\\\"\", \"\\\");\\n    background-position: center;\\n    background-size: cover;\\n  \"]);\n\n  _templateObject6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n\\n    & > span {\\n      color: white;\\n      font-size: 72px;\\n    }\\n  \"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    width: 120px;\\n    height: 120px;\\n    border-radius: 50%;\\n    background-color: #f8e71c;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    z-index: 10;\\n    & > p {\\n      font-size: 14px;\\n      text-align: center;\\n      line-height: 1.3em;\\n    }\\n  \"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    top: calc(\", \" - 3px);\\n    left: calc(\", \" - 3px);\\n    width:  calc(100% - \", \" * 2 - 4px);\\n    height: calc(100% - \", \" * 2 - 4px);\\n    border: 6px solid #ddd8e6;\\n    border-radius: 10px\\n    box-shadow: 0px 0px 0px 9999px rgba(0,0,0,0.5);\\n\\n  \"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    min-width: 100%;\\n    min-height: 100%;\\n    object-fit: cover;\\n    object-position: 50% 50%;\\n  \"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n    position: relative;\\n    width: 100vw;\\n    height: 100vh;\\n  \"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport Webcam from \"react-webcam\";\nimport styled from 'styled-components';\nimport './style.css';\nconst camera = \"environment\";\nconst width = \"15%\";\nconst height = \"10%\";\nconst Styled = {\n  Root: styled.div(_templateObject()),\n  Webcam: styled(Webcam)(_templateObject2()),\n  Border: styled.div(_templateObject3(), () => height, () => width, () => width, () => height),\n  Comments: styled.div(_templateObject4()),\n  Countdown: styled.div(_templateObject5()),\n  Confirm: styled.div(_templateObject6(), ({\n    file\n  }) => file),\n  Center: styled.div(_templateObject7()),\n  Button: styled.div(_templateObject8())\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderWebcam = () => React.createElement(Styled.Webcam, {\n      audio: false,\n      screenshotWidth: 1080,\n      videoConstraints: {\n        facingMode: camera,\n        width: 1920,\n        height: 1080\n      },\n      ref: this.webcam,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    });\n\n    this.renderWaitingShot = () => React.createElement(React.Fragment, null, this.renderWebcam(), React.createElement(Styled.Center, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Styled.Button, {\n      onClick: this.handleTakePhoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })));\n\n    this.renderCountdown = () => React.createElement(React.Fragment, null, this.renderWebcam(), React.createElement(Styled.Countdown, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.countdown)));\n\n    this.renderConfirmScreen = () => React.createElement(Styled.Confirm, {\n      file: this.state.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Styled.Comments, {\n      style: {\n        top: \"50%\",\n        left: \"7%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Happy\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), this.state.happy)), React.createElement(Styled.Comments, {\n      style: {\n        top: \"7%\",\n        right: \"3%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Sad\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), this.state.sad)));\n\n    this.handleTakePhoto = () => {\n      this.timer = setInterval(() => {\n        if (this.state.countdown === 1) {\n          new Promise((resolve, reject) => {\n            this.setState({\n              file: this.webcam.current.getScreenshot()\n            });\n            let newImage = this.state.file.replace(/^data:image\\/[a-z]+;base64,/, \"\");\n            let payload = {\n              \"requests\": [{\n                \"image\": {\n                  \"content\": newImage\n                },\n                \"features\": [{\n                  \"type\": \"FACE_DETECTION\",\n                  \"maxResults\": 5\n                }, {\n                  \"type\": \"LABEL_DETECTION\",\n                  \"maxResults\": 5\n                }, {\n                  \"type\": \"WEB_DETECTION\",\n                  \"maxResults\": 5\n                }]\n              }]\n            };\n            let apiKey = \"AIzaSyC-VPmACN5h3DlWeo06GRznEzxFenC9Eeo\";\n            fetch(\"https://vision.googleapis.com/v1/images:annotate?key=\" + apiKey, {\n              method: \"post\",\n              body: JSON.stringify(payload)\n            }).then(res => {\n              if (res.status !== 200) {\n                console.log('Looks like there was a problem. Status Code: ' + res.status);\n                return;\n              } // Examine the text in the response\n\n\n              res.json().then(data => {\n                this.setState({\n                  sad: data.responses[0].faceAnnotations[0].sorrowLikelihood\n                });\n                this.setState({\n                  happy: data.responses[0].faceAnnotations[0].joyLikelihood\n                });\n                console.log(data.responses[0].faceAnnotations.joyLikelihood);\n              }); //.responses[0].faceAnnotations.joyLikelihood)\n              //res.json()\n            }).catch(function (err) {\n              console.log('Fetch Error :-S', err);\n            });\n            resolve();\n          });\n        }\n\n        if (this.state.countdown > 1) {\n          this.setState({\n            countdown: this.state.countdown - 1\n          });\n        } else {\n          clearInterval(this.timer);\n          this.setState({\n            viewState: 2\n          });\n        }\n      }, 1000);\n      this.setState({\n        viewState: 1,\n        countdown: 3\n      });\n    };\n\n    this.handleReTakePhoto = () => {};\n\n    this.renderMainView = () => {\n      switch (this.state.viewState) {\n        case 0:\n          return this.renderWaitingShot();\n\n        case 1:\n          return this.renderCountdown();\n\n        case 2:\n          return this.renderConfirmScreen();\n      }\n    };\n\n    this.webcam = React.createRef();\n    this.state = {\n      viewState: 0,\n      countdown: 3,\n      file: undefined,\n      happy: undefined,\n      sad: undefined\n    };\n  }\n\n  render() {\n    return React.createElement(Styled.Root, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, this.renderMainView(), React.createElement(Styled.Border, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/pradnya/projects/FacialEmotionDetection/FacialEmotionDetection/src/App.js"],"names":["React","Component","render","Webcam","styled","camera","width","height","Styled","Root","div","Border","Comments","Countdown","Confirm","file","Center","Button","App","constructor","props","renderWebcam","facingMode","webcam","renderWaitingShot","handleTakePhoto","renderCountdown","state","countdown","renderConfirmScreen","top","left","happy","right","sad","timer","setInterval","Promise","resolve","reject","setState","current","getScreenshot","newImage","replace","payload","apiKey","fetch","method","body","JSON","stringify","then","res","status","console","log","json","data","responses","faceAnnotations","sorrowLikelihood","joyLikelihood","catch","err","clearInterval","viewState","handleReTakePhoto","renderMainView","createRef","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport Webcam from \"react-webcam\";\nimport styled from 'styled-components';\nimport './style.css';\nconst camera = \"environment\";\n\nconst width = \"15%\";\nconst height = \"10%\";\n\nconst Styled = {\n  Root: styled.div`\n    position: relative;\n    width: 100vw;\n    height: 100vh;\n  `,\n  Webcam: styled(Webcam)`\n    position: absolute;\n    min-width: 100%;\n    min-height: 100%;\n    object-fit: cover;\n    object-position: 50% 50%;\n  `,\n  Border: styled.div`\n    position: absolute;\n    top: calc(${() => height} - 3px);\n    left: calc(${() => width} - 3px);\n    width:  calc(100% - ${() => width} * 2 - 4px);\n    height: calc(100% - ${() => height} * 2 - 4px);\n    border: 6px solid #ddd8e6;\n    border-radius: 10px\n    box-shadow: 0px 0px 0px 9999px rgba(0,0,0,0.5);\n\n  `,\n  Comments: styled.div`\n    position: absolute;\n    width: 120px;\n    height: 120px;\n    border-radius: 50%;\n    background-color: #f8e71c;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    & > p {\n      font-size: 14px;\n      text-align: center;\n      line-height: 1.3em;\n    }\n  `,\n  Countdown: styled.div`\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    & > span {\n      color: white;\n      font-size: 72px;\n    }\n  `,\n  Confirm: styled.div`\n    width: 100%;\n    height: 100%;\n    background-image: url(\"${({file}) => file}\");\n    background-position: center;\n    background-size: cover;\n  `,\n  Center: styled.div`\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    bottom: 20px;\n  `,\n  Button: styled.div`\n    position: relative;\n    width: 90px;\n    height: 90px;\n    border-radius: 50%;\n    background-color: red;\n    bottom: 8%;\n    z-index: 10;\n  `,\n}\n\nclass App extends Component {\n  constructor(props){ \n    super(props);\n    this.webcam = React.createRef();\n    this.state = {\n      viewState: 0,\n      countdown: 3,\n      file: undefined,\n      happy: undefined,\n      sad: undefined\n    };\n  }\n\n  renderWebcam = () => (\n    <Styled.Webcam audio={false} screenshotWidth={1080} videoConstraints={{ facingMode: camera, width: 1920, height: 1080 }} ref={this.webcam} />\n  )\n\n  renderWaitingShot = () => (\n    <>\n      {this.renderWebcam()}\n      <Styled.Center>\n        <Styled.Button onClick={this.handleTakePhoto} />\n      </Styled.Center>\n    </>\n  )\n\n  renderCountdown = () => (\n    <>\n      {this.renderWebcam()}\n      <Styled.Countdown>\n        <span>{this.state.countdown}</span>\n      </Styled.Countdown>\n    </>\n  )\n\n  renderConfirmScreen = () => (\n    <Styled.Confirm file={this.state.file}>\n      <Styled.Comments style={{top: \"50%\", left: \"7%\"}}>\n        <p>Happy<br />{this.state.happy}</p>\n      </Styled.Comments>\n      <Styled.Comments style={{top: \"7%\", right: \"3%\"}}>\n        <p>Sad<br />{this.state.sad}</p>\n      </Styled.Comments>\n    </Styled.Confirm>\n  )\n\n  handleTakePhoto = () => {\n      this.timer = setInterval(() => {\n        if(this.state.countdown === 1) {\n          new Promise((resolve, reject) => {\n            this.setState({file: this.webcam.current.getScreenshot()});\n                let newImage=this.state.file.replace(/^data:image\\/[a-z]+;base64,/, \"\");\n                let payload={\n                  \"requests\":[\n                    {\n                      \"image\":{\n                        \"content\":newImage\n                      },\n                      \"features\":[\n                        {\n                          \"type\":\"FACE_DETECTION\",\n                          \"maxResults\":5\n                        },\n                        {\n                          \"type\":\"LABEL_DETECTION\",\n                          \"maxResults\":5\n                        },{\n                          \"type\":\"WEB_DETECTION\",\n                          \"maxResults\":5\n                        }\n                      ]\n                    }\n                  ]\n                }\n                let apiKey=\"AIzaSyC-VPmACN5h3DlWeo06GRznEzxFenC9Eeo\"\n                fetch(\"https://vision.googleapis.com/v1/images:annotate?key=\"+apiKey,{method:\"post\",body:JSON.stringify(payload)})\n              .then(res => {\n                if (res.status !== 200) {\n                  console.log('Looks like there was a problem. Status Code: ' +\n                    res.status);\n                  return;\n                }\n                // Examine the text in the response\n              res.json().then((data) =>{\n                this.setState({sad: data.responses[0].faceAnnotations[0].sorrowLikelihood})\n                this.setState({happy: data.responses[0].faceAnnotations[0].joyLikelihood})\n                console.log(data.responses[0].faceAnnotations.joyLikelihood);\n              });\n              //.responses[0].faceAnnotations.joyLikelihood)\n                //res.json()\n              })\n              .catch(function(err) {\n                console.log('Fetch Error :-S', err);\n              });\n            resolve();\n          });\n        }\n\n        if (this.state.countdown > 1) {\n          this.setState({countdown: this.state.countdown - 1});\n        }else{\n          clearInterval(this.timer);\n          this.setState({viewState: 2});\n        }\n      }, 1000);\n      \n      this.setState({viewState: 1, countdown: 3});\n  }\n\n  handleReTakePhoto = () => {\n\n  }\n\n  renderMainView = () => {\n    switch(this.state.viewState) {\n      case 0:\n        return this.renderWaitingShot();\n      case 1:\n        return this.renderCountdown();\n      case 2:\n        return this.renderConfirmScreen();\n    }\n  }\n\n  render() {\n    return (\n      <Styled.Root>\n        {this.renderMainView()}\n        <Styled.Border />\n      </Styled.Root>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}