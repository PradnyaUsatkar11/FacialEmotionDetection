{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/pradnya/projects/FacialEmotionDetection/FacialEmotionDetection/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/pradnya/projects/FacialEmotionDetection/FacialEmotionDetection/src/App.js\";\n\nfunction _templateObject8() {\n  const data = _taggedTemplateLiteral([\"\\n    position: relative;\\n    width: 90px;\\n    height: 90px;\\n    border-radius: 50%;\\n    background-color: red;\\n    bottom: 8%;\\n    z-index: 10;\\n  \"]);\n\n  _templateObject8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    display: flex;\\n    justify-content: center;\\n    width: 100%;\\n    bottom: 20px;\\n  \"]);\n\n  _templateObject7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  const data = _taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 100%;\\n    background-image: url(\\\"\", \"\\\");\\n    background-position: center;\\n    background-size: cover;\\n  \"]);\n\n  _templateObject6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n\\n    & > span {\\n      color: white;\\n      font-size: 72px;\\n    }\\n  \"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    width: 120px;\\n    height: 120px;\\n    border-radius: 50%;\\n    background-color: #f8e71c;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    z-index: 10;\\n    & > p {\\n      font-size: 14px;\\n      text-align: center;\\n      line-height: 1.3em;\\n    }\\n  \"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    top: calc(\", \" - 3px);\\n    left: calc(\", \" - 3px);\\n    width:  calc(100% - \", \" * 2 - 4px);\\n    height: calc(100% - \", \" * 2 - 4px);\\n    border: 6px solid #ddd8e6;\\n    border-radius: 10px\\n    box-shadow: 0px 0px 0px 9999px rgba(0,0,0,0.5);\\n\\n  \"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    min-width: 100%;\\n    min-height: 100%;\\n    object-fit: cover;\\n    object-position: 50% 50%;\\n  \"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n    position: relative;\\n    width: 100vw;\\n    height: 100vh;\\n  \"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport Webcam from \"react-webcam\";\nimport styled from 'styled-components';\nimport './style.css';\n\nconst axios = require('axios');\n\nconst b64toBlob = require('b64-to-blob');\n\nconst camera = \"environment\";\nconst width = \"15%\";\nconst height = \"10%\";\nconst divStyle = {\n  fontSize: '200%',\n  fontWeight: 600\n};\nconst Styled = {\n  Root: styled.div(_templateObject()),\n  Webcam: styled(Webcam)(_templateObject2()),\n  Border: styled.div(_templateObject3(), () => height, () => width, () => width, () => height),\n  Comments: styled.div(_templateObject4()),\n  Countdown: styled.div(_templateObject5()),\n  Confirm: styled.div(_templateObject6(), ({\n    file\n  }) => file),\n  Center: styled.div(_templateObject7()),\n  Button: styled.div(_templateObject8())\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderWebcam = () => React.createElement(Styled.Webcam, {\n      audio: true,\n      screenshotWidth: 1080,\n      videoConstraints: {\n        facingMode: camera,\n        width: 1920,\n        height: 1080\n      },\n      screenshotFormat: \"image/jpeg\",\n      ref: this.webcam,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    });\n\n    this.renderWaitingShot = () => React.createElement(React.Fragment, null, this.renderWebcam(), React.createElement(Styled.Center, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Styled.Button, {\n      onClick: this.handleTakePhoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })));\n\n    this.renderCountdown = () => React.createElement(React.Fragment, null, this.renderWebcam(), React.createElement(Styled.Countdown, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.state.countdown)));\n\n    this.renderConfirmScreen = () => React.createElement(Styled.Confirm, {\n      file: this.state.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    });\n\n    this.renderEmotions = () => React.createElement(Styled.Confirm, {\n      file: this.state.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Styled.Comments, {\n      style: {\n        top: \"20%\",\n        left: \"3%\",\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"HAPPY \\uD83D\\uDE04\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), this.state.happy))), React.createElement(Styled.Comments, {\n      style: {\n        top: \"20%\",\n        right: \"3%\",\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"SAD \\uD83D\\uDE25\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), this.state.sad))), React.createElement(Styled.Comments, {\n      style: {\n        top: \"60%\",\n        left: \"3%\",\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"ANGER \\uD83D\\uDE20\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), this.state.anger)), React.createElement(Styled.Comments, {\n      style: {\n        top: \"60%\",\n        right: \"3%\",\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"SURPRISE \\uD83D\\uDE32\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), this.state.surprise)), React.createElement(Styled.Center, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Styled.Button, {\n      onClick: this.reloadpage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"  \")));\n\n    this.renderError = () => React.createElement(Styled.Confirm, {\n      file: this.state.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Styled.Comments, {\n      style: {\n        top: \"40%\",\n        left: \"40%\",\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"No Face!!!\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    })), React.createElement(Styled.Center, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Styled.Button, {\n      onClick: this.reloadpage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"  \")));\n\n    this.reloadpage = () => {\n      window.location.reload(false);\n    };\n\n    this.handleTakePhoto = () => {\n      this.timer = setInterval(() => {\n        if (this.state.countdown === 1) {\n          new Promise((resolve, reject) => {\n            this.setState({\n              file: this.webcam.current.getScreenshot()\n            });\n            console.log(\"file..\", this.webcam.current.getScreenshot());\n            let newImage = this.state.file.replace(/^data:image\\/[a-z]+;base64,/, \"\");\n            const blob = b64toBlob(newImage, 'image/jpeg');\n            var blobUrl = URL.createObjectURL(blob);\n            const formData = new FormData();\n            formData.append('image', blob);\n            axios.post('http://34.93.166.145:8080/api/image/', formData) // let payload = {\n            //   \"requests\": [\n            //     {\n            //       \"image\": {\n            //         \"content\": newImage\n            //       },\n            //       \"features\": [\n            //         {\n            //           \"type\": \"FACE_DETECTION\",\n            //           \"maxResults\": 5\n            //         }\n            //       ]\n            //     }\n            //   ]\n            // }\n            // let apiKey = \"AIzaSyC-VPmACN5h3DlWeo06GRznEzxFenC9Eeo\"\n            // fetch(\"https://vision.googleapis.com/v1/images:annotate?key=\" + apiKey, { method: \"post\", body: JSON.stringify(payload) })\n            .then(res => {\n              if (res.status !== 202) {\n                console.log('Looks like there was a problem. Status Code: ' + res.status);\n                return;\n              } // Examine the text in the response\n\n\n              res.json().then(data => {\n                console.log(\"data...\", data); // if (data && data.responses && data.responses[0] && data.responses[0].faceAnnotations && data.responses[0].faceAnnotations[0]) {\n                //   this.setState({ showEmotions: true });\n                //   this.setState({ sad: data.responses[0].faceAnnotations[0].sorrowLikelihood })\n                //   this.setState({ happy: data.responses[0].faceAnnotations[0].joyLikelihood })\n                //   this.setState({ anger: data.responses[0].faceAnnotations[0].angerLikelihood })\n                //   this.setState({ surprise: data.responses[0].faceAnnotations[0].surpriseLikelihood })\n                // }\n                // else {\n                // }\n                // this.setState({ viewState: 3 });\n              });\n            }).catch(function (err) {\n              console.log('Fetch Error :-S', err);\n            });\n            resolve();\n          });\n        }\n\n        if (this.state.countdown > 1) {\n          this.setState({\n            countdown: this.state.countdown - 1\n          });\n        } else {\n          clearInterval(this.timer);\n          this.setState({\n            viewState: 2\n          });\n        }\n      }, 1000);\n      this.setState({\n        viewState: 1,\n        countdown: 3\n      });\n    };\n\n    this.handleReTakePhoto = () => {};\n\n    this.renderMainView = () => {\n      switch (this.state.viewState) {\n        case 0:\n          return this.renderWaitingShot();\n\n        case 1:\n          return this.renderCountdown();\n\n        case 2:\n          return this.renderConfirmScreen();\n\n        case 3:\n          return this.state.showEmotions ? this.renderEmotions() : this.renderError();\n      }\n    };\n\n    this.webcam = React.createRef();\n    this.state = {\n      viewState: 0,\n      countdown: 3,\n      file: undefined,\n      happy: undefined,\n      sad: undefined,\n      surprise: undefined,\n      anger: undefined,\n      showresults: false,\n      showEmotions: false\n    };\n  }\n\n  render() {\n    return React.createElement(Styled.Root, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, this.renderMainView(), React.createElement(Styled.Border, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/pradnya/projects/FacialEmotionDetection/FacialEmotionDetection/src/App.js"],"names":["React","Component","render","Webcam","styled","axios","require","b64toBlob","camera","width","height","divStyle","fontSize","fontWeight","Styled","Root","div","Border","Comments","Countdown","Confirm","file","Center","Button","App","constructor","props","renderWebcam","facingMode","webcam","renderWaitingShot","handleTakePhoto","renderCountdown","state","countdown","renderConfirmScreen","renderEmotions","top","left","happy","right","sad","anger","surprise","reloadpage","renderError","window","location","reload","timer","setInterval","Promise","resolve","reject","setState","current","getScreenshot","console","log","newImage","replace","blob","blobUrl","URL","createObjectURL","formData","FormData","append","post","then","res","status","json","data","catch","err","clearInterval","viewState","handleReTakePhoto","renderMainView","showEmotions","createRef","undefined","showresults"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport Webcam from \"react-webcam\";\nimport styled from 'styled-components';\nimport './style.css';\nconst axios = require('axios');\nconst b64toBlob = require('b64-to-blob');\nconst camera = \"environment\";\n\nconst width = \"15%\";\nconst height = \"10%\";\n\nconst divStyle = {\n  fontSize: '200%',\n  fontWeight: 600,\n\n};\n\nconst Styled = {\n  Root: styled.div`\n    position: relative;\n    width: 100vw;\n    height: 100vh;\n  `,\n  Webcam: styled(Webcam)`\n    position: absolute;\n    min-width: 100%;\n    min-height: 100%;\n    object-fit: cover;\n    object-position: 50% 50%;\n  `,\n  Border: styled.div`\n    position: absolute;\n    top: calc(${() => height} - 3px);\n    left: calc(${() => width} - 3px);\n    width:  calc(100% - ${() => width} * 2 - 4px);\n    height: calc(100% - ${() => height} * 2 - 4px);\n    border: 6px solid #ddd8e6;\n    border-radius: 10px\n    box-shadow: 0px 0px 0px 9999px rgba(0,0,0,0.5);\n\n  `,\n  Comments: styled.div`\n    position: absolute;\n    width: 120px;\n    height: 120px;\n    border-radius: 50%;\n    background-color: #f8e71c;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    & > p {\n      font-size: 14px;\n      text-align: center;\n      line-height: 1.3em;\n    }\n  `,\n  Countdown: styled.div`\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    & > span {\n      color: white;\n      font-size: 72px;\n    }\n  `,\n  Confirm: styled.div`\n    width: 100%;\n    height: 100%;\n    background-image: url(\"${({ file }) => file}\");\n    background-position: center;\n    background-size: cover;\n  `,\n  Center: styled.div`\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    bottom: 20px;\n  `,\n  Button: styled.div`\n    position: relative;\n    width: 90px;\n    height: 90px;\n    border-radius: 50%;\n    background-color: red;\n    bottom: 8%;\n    z-index: 10;\n  `,\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.webcam = React.createRef();\n    this.state = {\n      viewState: 0,\n      countdown: 3,\n      file: undefined,\n      happy: undefined,\n      sad: undefined,\n      surprise: undefined,\n      anger: undefined,\n      showresults: false,\n      showEmotions: false\n    };\n  }\n\n  renderWebcam = () => (\n    <Styled.Webcam audio={true} screenshotWidth={1080} videoConstraints={{ facingMode: camera, width: 1920, height: 1080 }} screenshotFormat=\"image/jpeg\" ref={this.webcam} />\n  )\n\n  renderWaitingShot = () => (\n    <>\n      {this.renderWebcam()}\n      <Styled.Center>\n        <Styled.Button onClick={this.handleTakePhoto} />\n      </Styled.Center>\n    </>\n  )\n\n  renderCountdown = () => (\n    <>\n      {this.renderWebcam()}\n      <Styled.Countdown>\n        <span>{this.state.countdown}</span>\n      </Styled.Countdown>\n    </>\n  )\n\n  renderConfirmScreen = () => (\n    <Styled.Confirm file={this.state.file}>\n\n    </Styled.Confirm>\n  )\n\n  renderEmotions = () => (\n    <Styled.Confirm file={this.state.file}>\n      <Styled.Comments style={{ top: \"20%\", left: \"3%\", fontWeight: 'bold' }}>\n        <p><b>HAPPY 😄<br />{this.state.happy}</b></p>\n      </Styled.Comments>\n      <Styled.Comments style={{ top: \"20%\", right: \"3%\", fontWeight: 'bold' }}>\n        <p><b>SAD 😥<br />{this.state.sad}</b></p>\n      </Styled.Comments>\n      <Styled.Comments style={{ top: \"60%\", left: \"3%\", fontWeight: 'bold' }}>\n        <p>ANGER 😠<br />{this.state.anger}</p>\n      </Styled.Comments>\n      <Styled.Comments style={{ top: \"60%\", right: \"3%\", fontWeight: 'bold' }}>\n        <p>SURPRISE 😲<br />{this.state.surprise}</p>\n      </Styled.Comments>\n      <Styled.Center>\n        <Styled.Button onClick={this.reloadpage} >  </Styled.Button>\n      </Styled.Center>\n    </Styled.Confirm>\n  )\n\n  renderError = () => (\n    <Styled.Confirm file={this.state.file}>\n      <Styled.Comments style={{ top: \"40%\", left: \"40%\", fontWeight: 'bold' }}>\n        <p>No Face!!!</p><br />\n      </Styled.Comments>\n      <Styled.Center>\n        <Styled.Button onClick={this.reloadpage} >  </Styled.Button>\n      </Styled.Center>\n    </Styled.Confirm>\n  )\n\n  reloadpage = () => {\n    window.location.reload(false)\n  }\n\n  // /***base 64 to blob */\n  // b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {\n  //   const byteCharacters = atob(b64Data);\n  //   const byteArrays = [];\n\n  //   for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n  //     const slice = byteCharacters.slice(offset, offset + sliceSize);\n\n  //     const byteNumbers = new Array(slice.length);\n  //     for (let i = 0; i < slice.length; i++) {\n  //       byteNumbers[i] = slice.charCodeAt(i);\n  //     }\n\n  //     const byteArray = new Uint8Array(byteNumbers);\n  //     byteArrays.push(byteArray);\n  //   }\n\n  //   const blob = new Blob(byteArrays, { type: contentType });\n  //   return blob;\n  // }\n\n  handleTakePhoto = () => {\n    this.timer = setInterval(() => {\n      if (this.state.countdown === 1) {\n        new Promise((resolve, reject) => {\n          this.setState({ file: this.webcam.current.getScreenshot() });\n          console.log(\"file..\", this.webcam.current.getScreenshot())\n          let newImage = this.state.file.replace(/^data:image\\/[a-z]+;base64,/, \"\");\n          const blob = b64toBlob(newImage, 'image/jpeg');\n          var blobUrl = URL.createObjectURL(blob);\n\n          const formData = new FormData()\n          formData.append(\n            'image',\n            blob\n          )\n          axios.post('http://34.93.166.145:8080/api/image/', formData)\n\n            // let payload = {\n            //   \"requests\": [\n            //     {\n            //       \"image\": {\n            //         \"content\": newImage\n            //       },\n            //       \"features\": [\n            //         {\n            //           \"type\": \"FACE_DETECTION\",\n            //           \"maxResults\": 5\n            //         }\n            //       ]\n            //     }\n            //   ]\n            // }\n            // let apiKey = \"AIzaSyC-VPmACN5h3DlWeo06GRznEzxFenC9Eeo\"\n            // fetch(\"https://vision.googleapis.com/v1/images:annotate?key=\" + apiKey, { method: \"post\", body: JSON.stringify(payload) })\n            .then(res => {\n              if (res.status !== 202) {\n                console.log('Looks like there was a problem. Status Code: ' +\n                  res.status);\n                return;\n              }\n              // Examine the text in the response\n              res.json().then((data) => {\n                console.log(\"data...\", data)\n\n                // if (data && data.responses && data.responses[0] && data.responses[0].faceAnnotations && data.responses[0].faceAnnotations[0]) {\n                //   this.setState({ showEmotions: true });\n                //   this.setState({ sad: data.responses[0].faceAnnotations[0].sorrowLikelihood })\n                //   this.setState({ happy: data.responses[0].faceAnnotations[0].joyLikelihood })\n                //   this.setState({ anger: data.responses[0].faceAnnotations[0].angerLikelihood })\n                //   this.setState({ surprise: data.responses[0].faceAnnotations[0].surpriseLikelihood })\n                // }\n                // else {\n\n                // }\n                // this.setState({ viewState: 3 });\n\n              });\n            })\n            .catch(function (err) {\n              console.log('Fetch Error :-S', err);\n            });\n\n          resolve();\n        });\n      }\n\n      if (this.state.countdown > 1) {\n        this.setState({ countdown: this.state.countdown - 1 });\n      } else {\n        clearInterval(this.timer);\n        this.setState({ viewState: 2 });\n      }\n    }, 1000);\n\n    this.setState({ viewState: 1, countdown: 3 });\n  }\n\n  // handleTakePhoto = () => {\n  //   this.timer = setInterval(() => {\n  //     if (this.state.countdown === 1) {\n  //       new Promise((resolve, reject) => {\n  //         this.setState({ file: this.webcam.current.getScreenshot() });\n  //         console.log(\"file..\", this.webcam.current.getScreenshot())\n  //         let newImage = this.state.file.replace(/^data:image\\/[a-z]+;base64,/, \"\");\n  //         const blob = b64toBlob(newImage, 'image/jpeg');\n  //         var blobUrl = URL.createObjectURL(blob);\n\n  //         const formData = new FormData()\n  //         formData.append(\n  //           'image',\n  //           blob\n  //         )\n  //         axios.post('http://34.93.166.145:8080/api/image/', formData)\n\n  //           // let payload = {\n  //           //   \"requests\": [\n  //           //     {\n  //           //       \"image\": {\n  //           //         \"content\": newImage\n  //           //       },\n  //           //       \"features\": [\n  //           //         {\n  //           //           \"type\": \"FACE_DETECTION\",\n  //           //           \"maxResults\": 5\n  //           //         }\n  //           //       ]\n  //           //     }\n  //           //   ]\n  //           // }\n  //           // let apiKey = \"AIzaSyC-VPmACN5h3DlWeo06GRznEzxFenC9Eeo\"\n  //           // fetch(\"https://vision.googleapis.com/v1/images:annotate?key=\" + apiKey, { method: \"post\", body: JSON.stringify(payload) })\n  //           .then(res => {\n  //             if (res.status !== 202) {\n  //               console.log('Looks like there was a problem. Status Code: ' +\n  //                 res.status);\n  //               return;\n  //             }\n  //             // Examine the text in the response\n  //             res.json().then((data) => {\n  //               console.log(\"data...\", data)\n\n  //               // if (data && data.responses && data.responses[0] && data.responses[0].faceAnnotations && data.responses[0].faceAnnotations[0]) {\n  //               //   this.setState({ showEmotions: true });\n  //               //   this.setState({ sad: data.responses[0].faceAnnotations[0].sorrowLikelihood })\n  //               //   this.setState({ happy: data.responses[0].faceAnnotations[0].joyLikelihood })\n  //               //   this.setState({ anger: data.responses[0].faceAnnotations[0].angerLikelihood })\n  //               //   this.setState({ surprise: data.responses[0].faceAnnotations[0].surpriseLikelihood })\n  //               // }\n  //               // else {\n\n  //               // }\n  //               // this.setState({ viewState: 3 });\n\n  //             });\n  //           })\n  //           .catch(function (err) {\n  //             console.log('Fetch Error :-S', err);\n  //           });\n\n  //         resolve();\n  //       });\n  //     }\n\n  //     if (this.state.countdown > 1) {\n  //       this.setState({ countdown: this.state.countdown - 1 });\n  //     } else {\n  //       clearInterval(this.timer);\n  //       this.setState({ viewState: 2 });\n  //     }\n  //   }, 1000);\n\n  //   this.setState({ viewState: 1, countdown: 3 });\n  // }\n\n  handleReTakePhoto = () => {\n\n  }\n\n  renderMainView = () => {\n    switch (this.state.viewState) {\n      case 0:\n        return this.renderWaitingShot();\n      case 1:\n        return this.renderCountdown();\n      case 2:\n        return this.renderConfirmScreen();\n      case 3:\n        return this.state.showEmotions ? this.renderEmotions() : this.renderError();\n    }\n  }\n\n  render() {\n    return (\n      <Styled.Root>\n        {this.renderMainView()}\n        <Styled.Border />\n      </Styled.Root>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}